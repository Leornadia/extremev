"use strict";(()=>{var e={};e.id=2748,e.ids=[2748],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},41395:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>f,patchFetch:()=>v,requestAsyncStorage:()=>c,routeModule:()=>p,serverHooks:()=>d,staticGenerationAsyncStorage:()=>m});var i={};r.r(i),r.d(i,{GET:()=>l});var a=r(49303),n=r(88716),s=r(60670),o=r(87070),u=r(72331);async function l(e){try{let t=e.nextUrl.searchParams.get("token");if(!t)return o.NextResponse.json({error:{code:"MISSING_TOKEN",message:"Verification token is required",timestamp:new Date().toISOString()}},{status:400});let r=await u._.verificationToken.findUnique({where:{token:t}});if(!r)return o.NextResponse.json({error:{code:"INVALID_TOKEN",message:"Invalid or expired verification token",timestamp:new Date().toISOString()}},{status:400});if(r.expires<new Date)return await u._.verificationToken.delete({where:{token:t}}),o.NextResponse.json({error:{code:"TOKEN_EXPIRED",message:"Verification token has expired. Please request a new one.",timestamp:new Date().toISOString()}},{status:400});return await u._.user.update({where:{email:r.identifier},data:{emailVerified:new Date}}),await u._.verificationToken.delete({where:{token:t}}),o.NextResponse.json({success:!0,message:"Email verified successfully. You can now sign in."},{status:200})}catch(e){return console.error("Email verification error:",e),o.NextResponse.json({error:{code:"INTERNAL_ERROR",message:"An error occurred during email verification",timestamp:new Date().toISOString()}},{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/auth/verify-email/route",pathname:"/api/auth/verify-email",filename:"route",bundlePath:"app/api/auth/verify-email/route"},resolvedPagePath:"/Users/almeidajose/Documents/A/App/Extreme V/app/api/auth/verify-email/route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:c,staticGenerationAsyncStorage:m,serverHooks:d}=p,f="/api/auth/verify-email/route";function v(){return(0,s.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:m})}},72331:(e,t,r)=>{r.d(t,{Z:()=>o,_:()=>s});var i=r(53524);let a=global,n=null;try{n=a.prisma||new i.PrismaClient({log:["error"]})}catch(e){console.warn("Prisma client initialization failed:",e),n=null}let s=n,o=s}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[8948,5972],()=>r(41395));module.exports=i})();