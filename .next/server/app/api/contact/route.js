"use strict";(()=>{var e={};e.id=386,e.ids=[386],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6005:e=>{e.exports=require("node:crypto")},18298:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>_,patchFetch:()=>w,requestAsyncStorage:()=>E,routeModule:()=>h,serverHooks:()=>A,staticGenerationAsyncStorage:()=>f});var s={};a.r(s),a.d(s,{POST:()=>g});var r=a(49303),n=a(88716),o=a(60670),i=a(87070),m=a(2723),l=a(1964);let p=l.O.emailApiKey?new m.Resend(l.O.emailApiKey):null,u=new Map;async function c(e){if(!p){console.warn("Email service not configured. Skipping email send.");return}let t=l.O.emailFrom||"noreply@extremev.co.za";try{await p.emails.send({from:t,to:"info@extremev.co.za",subject:`New Contact Form Submission from ${e.name}`,html:`
        <h2>New Contact Form Submission</h2>
        <p><strong>Name:</strong> ${e.name}</p>
        <p><strong>Email:</strong> ${e.email}</p>
        <p><strong>Phone:</strong> ${e.phone}</p>
        <p><strong>Message:</strong></p>
        <p>${e.message.replace(/\n/g,"<br>")}</p>
        <hr>
        <p><small>Submitted at: ${new Date().toLocaleString()}</small></p>
      `}),await p.emails.send({from:t,to:e.email,subject:"Thank you for contacting Extreme V",html:`
        <h2>Thank you for contacting us!</h2>
        <p>Hi ${e.name},</p>
        <p>We've received your message and will get back to you within 24 hours.</p>
        <p><strong>Your message:</strong></p>
        <p>${e.message.replace(/\n/g,"<br>")}</p>
        <hr>
        <p>Best regards,<br>The Extreme V Team</p>
        <p><small>If you didn't submit this form, please ignore this email.</small></p>
      `})}catch(e){throw console.error("Failed to send email:",e),Error("Failed to send email notification")}}async function d(e){console.log("Contact form submission:",{...e,timestamp:new Date().toISOString()})}async function g(e){try{let t=function(e){let t=e.headers.get("x-forwarded-for"),a=t?t.split(",")[0]:"unknown";return`contact_${a}`}(e);if(!function(e){let t=Date.now(),a=u.get(e);return!a||t>a.resetTime?(u.set(e,{count:1,resetTime:t+36e5}),{allowed:!0,remaining:4}):a.count>=5?{allowed:!1,remaining:0}:(a.count+=1,{allowed:!0,remaining:5-a.count})}(t).allowed)return i.NextResponse.json({error:{code:"RATE_LIMIT_EXCEEDED",message:"Too many requests. Please try again later."}},{status:429});let a=await e.json(),s=function(e){let t=[];return((!e.name||"string"!=typeof e.name||e.name.trim().length<2)&&t.push("Name must be at least 2 characters"),e.email&&"string"==typeof e.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)||t.push("Invalid email format"):t.push("Email is required"),e.phone&&"string"==typeof e.phone?/^[\d\s\-\+\(\)]+$/.test(e.phone)||t.push("Invalid phone number format"):t.push("Phone number is required"),(!e.message||"string"!=typeof e.message||e.message.trim().length<10)&&t.push("Message must be at least 10 characters"),t.length>0)?{valid:!1,errors:t}:{valid:!0,data:{name:e.name.trim(),email:e.email.trim().toLowerCase(),phone:e.phone.trim(),message:e.message.trim()}}}(a);if(!s.valid)return i.NextResponse.json({error:{code:"VALIDATION_ERROR",message:"Invalid form data",details:s.errors}},{status:400});let r=s.data;return await d(r),await c(r),i.NextResponse.json({success:!0,message:"Message sent successfully"},{status:200})}catch(e){return console.error("Contact form error:",e),i.NextResponse.json({error:{code:"INTERNAL_ERROR",message:"Failed to process your request. Please try again later."}},{status:500})}}let h=new r.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/contact/route",pathname:"/api/contact",filename:"route",bundlePath:"app/api/contact/route"},resolvedPagePath:"/Users/almeidajose/Documents/A/App/Extreme V/app/api/contact/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:E,staticGenerationAsyncStorage:f,serverHooks:A}=h,_="/api/contact/route";function w(){return(0,o.patchFetch)({serverHooks:A,staticGenerationAsyncStorage:f})}},1964:(e,t,a)=>{function s(e,t){return process.env[e]||t}a.d(t,{O:()=>r});let r={databaseUrl:s("DATABASE_URL"),nextAuthUrl:s("NEXTAUTH_URL","http://localhost:3000"),nextAuthSecret:s("NEXTAUTH_SECRET"),emailFrom:s("EMAIL_FROM"),emailApiKey:s("EMAIL_API_KEY"),mediaUrl:s("NEXT_PUBLIC_MEDIA_URL"),awsAccessKeyId:s("AWS_ACCESS_KEY_ID"),awsSecretAccessKey:s("AWS_SECRET_ACCESS_KEY"),awsRegion:s("AWS_REGION","us-east-1"),awsS3Bucket:s("AWS_S3_BUCKET"),cmsUrl:s("NEXT_PUBLIC_CMS_URL"),cmsApiToken:s("CMS_API_TOKEN"),gaId:s("NEXT_PUBLIC_GA_ID"),nodeEnv:s("NODE_ENV","development"),isDevelopment:!1,isProduction:!0}}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[8948,5972,2723],()=>a(18298));module.exports=s})();