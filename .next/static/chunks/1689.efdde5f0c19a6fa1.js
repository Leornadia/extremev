"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1689],{1689:function(e,a,o){o.r(a),o.d(a,{default:function(){return v}});var t=o(7437),s=o(2265),n=o(60),r=o(961),i=o(5285),l=o(2724),c=o(5903),d=o(1057),m=o(1448),u=o(7621),h=o(8328);function p(){let{active:e,progress:a}=(0,u.S)();return e?(0,t.jsx)(h.V,{center:!0,children:(0,t.jsx)("div",{className:"bg-white/90 backdrop-blur-sm rounded-lg p-6 shadow-xl min-w-[200px]",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsxs)("div",{className:"relative w-12 h-12",children:[(0,t.jsx)("div",{className:"absolute inset-0 border-4 border-primary-100 rounded-full"}),(0,t.jsx)("div",{className:"absolute inset-0 border-4 border-primary-500 rounded-full border-t-transparent animate-spin",style:{animationDuration:"1s"}})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-neutral-700",children:"Loading 3D Scene..."}),(0,t.jsxs)("div",{className:"text-xs text-neutral-500 mt-1",children:[Math.round(a),"%"]})]}),(0,t.jsx)("div",{className:"w-full h-2 bg-neutral-200 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-primary-500 transition-all duration-300 ease-out",style:{width:"".concat(a,"%")}})})]})})}):null}let x={modelTargetSize:12,cameraPosition:[12,6,12],cameraTarget:[0,2.5,0],cameraFov:50,minDistance:5,maxDistance:50,autoRotateSpeed:.5,environment:{file:"/environments/charolettenbrunn_park_4k.exr",background:!0,ground:{height:3,radius:60,scale:40},environmentIntensity:.8,backgroundIntensity:2},contactShadows:{position:[0,-.001,0],opacity:.5,scale:40,blur:2,far:25,resolution:512,color:"#1f1f1f"}};function g(){let{gl:e}=(0,n.A)();return(0,s.useEffect)(()=>{e.shadowMap.enabled=!0,e.shadowMap.type=m.PCFSoftShadowMap},[e]),null}function S(e){let{modelPath:a,targetSize:o}=e,{scene:n}=(0,i.L)(a);return(0,s.useEffect)(()=>{if(!n)return;let e=new m.Box3().setFromObject(n).getSize(new m.Vector3),a=Math.max(e.x,e.y,e.z);n.scale.setScalar(o/a),function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.traverse(e=>{if(!e.isMesh)return;let a=(e.name||"").toLowerCase();(a.includes("ground")||a.includes("floor")||a.includes("shadow")||a.includes("helper"))&&(e.visible=!1)}),e.updateWorldMatrix(!0,!0);let o=new m.Box3;if(e.traverse(e=>{if(e instanceof m.Mesh&&e.visible&&e.geometry&&(e.geometry.computeBoundingBox(),e.geometry.boundingBox)){let a=e.geometry.boundingBox.clone();a.applyMatrix4(e.matrixWorld),o.union(a)}}),o.isEmpty())return;let t=a-o.min.y;e.position.y+=t}(n,0);let t=new m.Box3().setFromObject(n).getCenter(new m.Vector3);n.position.x=-t.x,n.position.z=-t.z,n.traverse(e=>{if(e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0,e.material)){let a=e.material;a.envMapIntensity=.3,void 0!==a.specularIntensity&&a.specularIntensity>1&&(a.specularIntensity=.5),a.specularColor&&a.specularColor.setRGB(Math.min(a.specularColor.r,1),Math.min(a.specularColor.g,1),Math.min(a.specularColor.b,1)),void 0!==a.metalness&&a.metalness>.9&&(a.metalness=.3),void 0!==a.roughness&&a.roughness<.1&&(a.roughness=.4),e.geometry.attributes.color&&!a.vertexColors&&(a.vertexColors=!0),a.map&&(a.map.colorSpace=m.SRGBColorSpace,a.map.needsUpdate=!0),a.normalMap&&(a.normalMap.colorSpace=m.LinearSRGBColorSpace),a.metalnessMap&&(a.metalnessMap.colorSpace=m.LinearSRGBColorSpace),a.roughnessMap&&(a.roughnessMap.colorSpace=m.LinearSRGBColorSpace),a.needsUpdate=!0}})},[n,o]),(0,t.jsx)("primitive",{object:n})}function j(e){let{resetSignal:a,controlsRef:o,cameraPosition:t,cameraTarget:r}=e,{camera:i}=(0,n.A)();return(0,s.useEffect)(()=>{void 0!==a&&(i.position.set(...t),i.lookAt(...r),i.updateProjectionMatrix(),o.current&&(o.current.target.set(...r),o.current.update()))},[i,a,o,t,r]),null}function f(){return(0,t.jsxs)("group",{children:[(0,t.jsxs)("mesh",{position:[0,.5,0],castShadow:!0,children:[(0,t.jsx)("boxGeometry",{args:[3,.2,3]}),(0,t.jsx)("meshStandardMaterial",{color:"#D2691E"})]}),(0,t.jsxs)("mesh",{position:[-1,2,-1],castShadow:!0,children:[(0,t.jsx)("boxGeometry",{args:[.2,4,.2]}),(0,t.jsx)("meshStandardMaterial",{color:"#8B4513"})]}),(0,t.jsxs)("mesh",{position:[1,2,-1],castShadow:!0,children:[(0,t.jsx)("boxGeometry",{args:[.2,4,.2]}),(0,t.jsx)("meshStandardMaterial",{color:"#8B4513"})]}),(0,t.jsxs)("mesh",{position:[-1,2,1],castShadow:!0,children:[(0,t.jsx)("boxGeometry",{args:[.2,4,.2]}),(0,t.jsx)("meshStandardMaterial",{color:"#8B4513"})]}),(0,t.jsxs)("mesh",{position:[1,2,1],castShadow:!0,children:[(0,t.jsx)("boxGeometry",{args:[.2,4,.2]}),(0,t.jsx)("meshStandardMaterial",{color:"#8B4513"})]}),(0,t.jsxs)("mesh",{position:[0,4.5,0],castShadow:!0,children:[(0,t.jsx)("coneGeometry",{args:[2,1.5,4]}),(0,t.jsx)("meshStandardMaterial",{color:"#DC143C"})]}),(0,t.jsxs)("mesh",{position:[2,1.5,0],rotation:[0,0,-Math.PI/6],castShadow:!0,children:[(0,t.jsx)("boxGeometry",{args:[3,.1,1]}),(0,t.jsx)("meshStandardMaterial",{color:"#4169E1"})]}),(0,t.jsxs)("mesh",{position:[-3,2,0],castShadow:!0,children:[(0,t.jsx)("boxGeometry",{args:[.15,4,.15]}),(0,t.jsx)("meshStandardMaterial",{color:"#8B4513"})]}),(0,t.jsxs)("mesh",{position:[-5,2,0],castShadow:!0,children:[(0,t.jsx)("boxGeometry",{args:[.15,4,.15]}),(0,t.jsx)("meshStandardMaterial",{color:"#8B4513"})]}),(0,t.jsxs)("mesh",{position:[-4,3.8,0],castShadow:!0,children:[(0,t.jsx)("boxGeometry",{args:[2,.15,.15]}),(0,t.jsx)("meshStandardMaterial",{color:"#8B4513"})]})]})}function v(e){let{modelPath:a,productName:o,resetSignal:n,viewerConfig:i}=e,u=(0,s.useRef)(null),h=(0,s.useMemo)(()=>{var e;let a={...x.environment,...(null==i?void 0:i.environment)||{},ground:{...x.environment.ground,...(null==i?void 0:null===(e=i.environment)||void 0===e?void 0:e.ground)||{}}},o={...x.contactShadows,...(null==i?void 0:i.contactShadows)||{}};return{...x,...i,environment:a,contactShadows:o}},[i]);return(0,t.jsx)("div",{className:"w-full h-full",children:(0,t.jsxs)(r.Xz,{shadows:!0,camera:{position:h.cameraPosition,fov:h.cameraFov},gl:{antialias:!0,toneMapping:m.ACESFilmicToneMapping,toneMappingExposure:1},onCreated:e=>{let{gl:a}=e;a.outputColorSpace=m.SRGBColorSpace},children:[(0,t.jsx)(j,{resetSignal:n,controlsRef:u,cameraPosition:h.cameraPosition,cameraTarget:h.cameraTarget}),(0,t.jsx)(g,{}),(0,t.jsx)(s.Suspense,{fallback:null,children:(0,t.jsx)(l.qA,{preset:"park",background:h.environment.background,ground:h.environment.ground,environmentIntensity:.5})}),(0,t.jsx)(c.z,{ref:u,makeDefault:!0,enableDamping:!0,dampingFactor:.1,enablePan:!0,enableZoom:!0,enableRotate:!0,autoRotate:!0,autoRotateSpeed:h.autoRotateSpeed,minDistance:h.minDistance,maxDistance:h.maxDistance,maxPolarAngle:Math.PI/2.1,minPolarAngle:.2,zoomSpeed:1.2,rotateSpeed:.8,target:h.cameraTarget}),(0,t.jsx)("ambientLight",{intensity:.5}),(0,t.jsx)("directionalLight",{position:[5,10,5],intensity:.8,castShadow:!0,"shadow-bias":-.0001,"shadow-mapSize":[1024,1024]}),(0,t.jsx)("pointLight",{position:[-5,5,-5],intensity:.5,color:"#ffffff"}),(0,t.jsx)(d.j,{position:h.contactShadows.position,opacity:h.contactShadows.opacity,scale:h.contactShadows.scale,blur:h.contactShadows.blur,far:h.contactShadows.far,resolution:h.contactShadows.resolution,color:h.contactShadows.color}),(0,t.jsx)(s.Suspense,{fallback:null,children:a?(0,t.jsx)(S,{modelPath:a,targetSize:h.modelTargetSize}):(0,t.jsx)(f,{})}),(0,t.jsx)(p,{})]})})}}}]);