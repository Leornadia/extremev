"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8330],{9665:function(e,t,s){s.d(t,{k:function(){return g}});var a=s(7437),n=s(2265),r=s(1723),l=s(9322),i=s(1671),d=s(2135),c=s(875),o=s(2369),x=s(9345),m=s(3774),u=s(3041),h=s(4226),p=s(4964);let j={pending:{label:"Pending Review",icon:r.Z,color:"text-amber-600 bg-amber-50 border-amber-200",nextStatus:"reviewed",nextLabel:"Mark as Reviewed"},reviewed:{label:"Under Review",icon:l.Z,color:"text-blue-600 bg-blue-50 border-blue-200",nextStatus:"quoted",nextLabel:"Mark as Quoted"},quoted:{label:"Quote Sent",icon:i.Z,color:"text-green-600 bg-green-50 border-green-200",nextStatus:"converted",nextLabel:"Mark as Converted"},converted:{label:"Converted",icon:i.Z,color:"text-primary-600 bg-primary-50 border-primary-200",nextStatus:null,nextLabel:null}};function g(e){var t,s,r,l,i;let{quote:g,onStatusUpdate:b}=e,[v,f]=(0,n.useState)(!1),[N,y]=(0,n.useState)(!1),[w,S]=(0,n.useState)(g.notes||""),[C,k]=(0,n.useState)(!1),q=j[g.status]||j.pending,L=q.icon,Z=g.customerInfo,E=g.pricing,z=g.designSnapshot;async function F(e){y(!0);try{await b(g.id,e)}finally{y(!1)}}async function A(){y(!0);try{await b(g.id,g.status,w),k(!1)}finally{y(!1)}}return(0,a.jsxs)("div",{className:"bg-white border border-neutral-200 rounded-lg overflow-hidden hover:shadow-md transition-shadow",children:[(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsxs)("h3",{className:"font-semibold text-neutral-900 text-lg",children:["Quote #",g.id.slice(0,8).toUpperCase()]}),(0,a.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium border ".concat(q.color),children:[(0,a.jsx)(L,{className:"w-3.5 h-3.5"}),q.label]})]}),(0,a.jsxs)("p",{className:"text-sm text-neutral-600",children:["Submitted"," ",new Date(g.createdAt).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})]})]}),(0,a.jsx)(h.z,{variant:"ghost",size:"sm",onClick:()=>f(!v),className:"ml-4",children:v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Z,{className:"w-4 h-4 mr-1"}),"Collapse"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,{className:"w-4 h-4 mr-1"}),"Expand"]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 text-neutral-500 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-neutral-600",children:"Customer"}),(0,a.jsx)("p",{className:"text-sm font-medium text-neutral-900",children:(null==Z?void 0:Z.name)||"N/A"})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4 text-neutral-500 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-neutral-600",children:"Email"}),(0,a.jsx)("p",{className:"text-sm font-medium text-neutral-900",children:(null==Z?void 0:Z.email)||(null===(t=g.user)||void 0===t?void 0:t.email)||"N/A"})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 text-neutral-500 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-neutral-600",children:"Location"}),(0,a.jsxs)("p",{className:"text-sm font-medium text-neutral-900",children:[null==Z?void 0:Z.city,", ",null==Z?void 0:Z.state]})]})]})]}),(null==E?void 0:E.total)&&(0,a.jsx)("div",{className:"mt-4 p-4 bg-neutral-50 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-neutral-600",children:"Estimated Total"}),(0,a.jsxs)("span",{className:"text-lg font-bold text-neutral-900",children:["$",E.total.toLocaleString()]})]})})]}),v&&(0,a.jsxs)("div",{className:"border-t border-neutral-200 p-6 bg-neutral-50 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-neutral-900 mb-3",children:"Contact Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(null==Z?void 0:Z.phone)&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 text-neutral-500"}),(0,a.jsx)("span",{className:"text-sm text-neutral-700",children:Z.phone})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 text-neutral-500"}),(0,a.jsxs)("span",{className:"text-sm text-neutral-700",children:[null==Z?void 0:Z.city,", ",null==Z?void 0:Z.state," ",null==Z?void 0:Z.postalCode]})]})]})]}),E&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-neutral-900 mb-3",children:"Pricing Breakdown"}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4 space-y-2",children:[E.components&&E.components.length>0&&(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-neutral-600 uppercase",children:"Components"}),E.components.slice(0,5).map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{className:"text-neutral-700",children:[e.name," ",e.quantity>1&&"(\xd7".concat(e.quantity,")")]}),(0,a.jsxs)("span",{className:"text-neutral-900",children:["$",e.totalPrice.toLocaleString()]})]},t)),E.components.length>5&&(0,a.jsxs)("p",{className:"text-xs text-neutral-500",children:["+",E.components.length-5," more components"]})]}),(0,a.jsxs)("div",{className:"border-t border-neutral-200 pt-2 mt-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-neutral-600",children:"Subtotal"}),(0,a.jsxs)("span",{className:"text-neutral-900",children:["$",null===(s=E.subtotal)||void 0===s?void 0:s.toLocaleString()]})]}),E.estimatedShipping>0&&(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-neutral-600",children:"Estimated Shipping"}),(0,a.jsxs)("span",{className:"text-neutral-900",children:["$",null===(r=E.estimatedShipping)||void 0===r?void 0:r.toLocaleString()]})]}),E.estimatedInstallation>0&&(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-neutral-600",children:"Installation"}),(0,a.jsxs)("span",{className:"text-neutral-900",children:["$",null===(l=E.estimatedInstallation)||void 0===l?void 0:l.toLocaleString()]})]})]}),(0,a.jsx)("div",{className:"border-t border-neutral-200 pt-2 mt-2",children:(0,a.jsxs)("div",{className:"flex justify-between font-semibold",children:[(0,a.jsx)("span",{className:"text-neutral-900",children:"Total"}),(0,a.jsxs)("span",{className:"text-neutral-900",children:["$",null===(i=E.total)||void 0===i?void 0:i.toLocaleString()]})]})})]})]}),z&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-neutral-900 mb-3",children:"Design"}),(0,a.jsx)(p.T,{design:z})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h4",{className:"font-semibold text-neutral-900",children:"Admin Notes"}),!C&&(0,a.jsx)(h.z,{variant:"ghost",size:"sm",onClick:()=>k(!0),children:"Edit"})]}),C?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("textarea",{value:w,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:4,placeholder:"Add notes about this quote request..."}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(h.z,{onClick:A,disabled:N,size:"sm",children:"Save Notes"}),(0,a.jsx)(h.z,{variant:"ghost",onClick:()=>{S(g.notes||""),k(!1)},disabled:N,size:"sm",children:"Cancel"})]})]}):(0,a.jsx)("div",{className:"bg-white rounded-lg p-4",children:w?(0,a.jsx)("p",{className:"text-sm text-neutral-700 whitespace-pre-wrap",children:w}):(0,a.jsx)("p",{className:"text-sm text-neutral-500 italic",children:"No notes added yet"})})]}),q.nextStatus&&(0,a.jsx)("div",{className:"flex gap-2 pt-4 border-t border-neutral-200",children:(0,a.jsx)(h.z,{onClick:()=>F(q.nextStatus),disabled:N,children:q.nextLabel})})]})]})}},3616:function(e,t,s){s.d(t,{h:function(){return l}});var a=s(7437),n=s(3577),r=s(8842);function l(e){let{statusFilter:t,onStatusFilterChange:s,sortBy:l,onSortByChange:i,sortOrder:d,onSortOrderChange:c,totalCount:o}=e;return(0,a.jsx)("div",{className:"bg-white border border-neutral-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.Z,{className:"w-4 h-4 text-neutral-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-neutral-700",children:"Filters"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3 items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{htmlFor:"status-filter",className:"text-sm text-neutral-600",children:"Status:"}),(0,a.jsxs)("select",{id:"status-filter",value:t,onChange:e=>s(e.target.value),className:"px-3 py-1.5 border border-neutral-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"All"}),(0,a.jsx)("option",{value:"pending",children:"Pending"}),(0,a.jsx)("option",{value:"reviewed",children:"Reviewed"}),(0,a.jsx)("option",{value:"quoted",children:"Quoted"}),(0,a.jsx)("option",{value:"converted",children:"Converted"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{htmlFor:"sort-by",className:"text-sm text-neutral-600",children:"Sort by:"}),(0,a.jsxs)("select",{id:"sort-by",value:l,onChange:e=>i(e.target.value),className:"px-3 py-1.5 border border-neutral-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"createdAt",children:"Date"}),(0,a.jsx)("option",{value:"status",children:"Status"})]})]}),(0,a.jsx)("button",{onClick:()=>c("asc"===d?"desc":"asc"),className:"p-1.5 border border-neutral-300 rounded-lg hover:bg-neutral-50 transition-colors",title:"asc"===d?"Sort descending":"Sort ascending",children:(0,a.jsx)(r.Z,{className:"w-4 h-4 text-neutral-600"})}),(0,a.jsxs)("div",{className:"text-sm text-neutral-600 ml-2",children:[o," ",1===o?"result":"results"]})]})]})})}},8330:function(e,t,s){s.d(t,{AdminQuotesList:function(){return c}});var a=s(7437),n=s(2265),r=s(9665),l=s(3616),i=s(1263),d=s(9322);function c(){let[e,t]=(0,n.useState)([]),[s,c]=(0,n.useState)(!0),[o,x]=(0,n.useState)(null),[m,u]=(0,n.useState)("all"),[h,p]=(0,n.useState)("createdAt"),[j,g]=(0,n.useState)("desc");async function b(){try{c(!0),x(null);let e=new URLSearchParams({status:m,sortBy:h,sortOrder:j,limit:"50",offset:"0"}),s=await fetch("/api/admin/quotes?".concat(e));if(!s.ok)throw Error("Failed to fetch quote requests");let a=await s.json();t(a.quoteRequests)}catch(e){console.error("Error fetching quotes:",e),x("Failed to load quote requests. Please try again.")}finally{c(!1)}}async function v(e,t,s){try{if(!(await fetch("/api/admin/quotes/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t,notes:s})})).ok)throw Error("Failed to update quote status");await b()}catch(e){console.error("Error updating quote:",e),alert("Failed to update quote status. Please try again.")}}return((0,n.useEffect)(()=>{b()},[m,h,j]),s)?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(i.$j,{size:"lg"})}):o?(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(d.Z,{className:"w-6 h-6 text-red-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-red-900",children:"Error"}),(0,a.jsx)("p",{className:"text-red-700",children:o})]})]})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(l.h,{statusFilter:m,onStatusFilterChange:u,sortBy:h,onSortByChange:p,sortOrder:j,onSortOrderChange:g,totalCount:e.length}),0===e.length?(0,a.jsx)("div",{className:"text-center py-12 bg-white rounded-lg border border-neutral-200",children:(0,a.jsx)("p",{className:"text-neutral-600",children:"No quote requests found"})}):(0,a.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,a.jsx)(r.k,{quote:e,onStatusUpdate:v},e.id))})]})}},4964:function(e,t,s){s.d(t,{T:function(){return r}});var a=s(7437),n=s(3947);function r(e){var t,s,r;let{design:l}=e,i=(null===(t=l.components)||void 0===t?void 0:t.length)||0,d=null===(s=l.metadata)||void 0===s?void 0:s.dimensions,c=(null===(r=l.components)||void 0===r?void 0:r.reduce((e,t)=>{let s=t.category||"Other";return e[s]||(e[s]=[]),e[s].push(t),e},{}))||{};return(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-neutral-200 overflow-hidden",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-neutral-50 border-b border-neutral-200",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-neutral-600 mb-1",children:"Components"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-neutral-900",children:i})]}),d&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-neutral-600 mb-1",children:"Width"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-neutral-900",children:[d.width,"ft"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-neutral-600 mb-1",children:"Depth"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-neutral-900",children:[d.depth,"ft"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-neutral-600 mb-1",children:"Height"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-neutral-900",children:[d.height,"ft"]})]})]})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("h5",{className:"text-sm font-semibold text-neutral-900 mb-3 flex items-center gap-2",children:[(0,a.jsx)(n.Z,{className:"w-4 h-4"}),"Components Breakdown"]}),(0,a.jsx)("div",{className:"space-y-3",children:Object.entries(c).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-medium text-neutral-600 uppercase mb-1",children:t}),(0,a.jsx)("div",{className:"space-y-1",children:s.map((e,t)=>{var s;return(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm py-1",children:[(0,a.jsx)("span",{className:"text-neutral-700",children:e.name||"Component"}),(0,a.jsxs)("span",{className:"text-neutral-500 text-xs",children:["ID: ",null===(s=e.instanceId)||void 0===s?void 0:s.slice(0,8)]})]},"".concat(e.instanceId,"-").concat(t))})})]},t)})}),0===i&&(0,a.jsx)("p",{className:"text-sm text-neutral-500 italic",children:"No components in design"})]}),l.metadata&&(0,a.jsx)("div",{className:"p-4 bg-neutral-50 border-t border-neutral-200",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.metadata.ageRange&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-neutral-600",children:"Age Range"}),(0,a.jsx)("p",{className:"font-medium text-neutral-900",children:l.metadata.ageRange})]}),l.metadata.estimatedWeight&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-neutral-600",children:"Est. Weight"}),(0,a.jsxs)("p",{className:"font-medium text-neutral-900",children:[l.metadata.estimatedWeight," lbs"]})]})]})})]})}},4226:function(e,t,s){s.d(t,{z:function(){return i}});var a=s(7437),n=s(2265),r=s(7648),l=s(4508);let i=n.forwardRef((e,t)=>{let{variant:s="primary",size:n="md",loading:i=!1,isLoading:d=!1,fullWidth:c=!1,disabled:o,href:x,className:m,children:u,...h}=e,p=i||d,j=(0,l.cn)("inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500 active:bg-primary-800",secondary:"bg-secondary-500 text-white hover:bg-secondary-600 focus:ring-secondary-500 active:bg-secondary-700",ghost:"bg-transparent text-neutral-700 hover:bg-neutral-100 focus:ring-neutral-500 active:bg-neutral-200",outline:"bg-transparent border-2 border-neutral-200 text-neutral-700 hover:border-primary-500 hover:text-primary-600 focus:ring-primary-500 active:bg-primary-50"}[s],{sm:"min-h-[44px] px-4 py-2 text-sm",md:"min-h-[44px] px-6 py-3 text-base",lg:"min-h-[44px] px-8 py-4 text-lg"}[n],c&&"w-full",m),g=(0,a.jsxs)(a.Fragment,{children:[p&&(0,a.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),u]});return x?(0,a.jsx)(r.default,{href:x,className:j,children:g}):(0,a.jsx)("button",{ref:t,disabled:o||p,className:j,...h,children:g})});i.displayName="Button"},1263:function(e,t,s){s.d(t,{$j:function(){return i}});var a=s(7437),n=s(4508);let r={sm:"w-4 h-4 border-2",md:"w-8 h-8 border-2",lg:"w-12 h-12 border-3",xl:"w-16 h-16 border-4"},l={primary:"border-primary-200 border-t-primary-600",secondary:"border-secondary-200 border-t-secondary-600",white:"border-white/30 border-t-white",neutral:"border-neutral-200 border-t-neutral-600"};function i(e){let{size:t="md",variant:s="primary",className:i,label:d="Loading..."}=e;return(0,a.jsx)("div",{className:(0,n.cn)("inline-block rounded-full animate-spin",r[t],l[s],i),role:"status","aria-label":d,children:(0,a.jsx)("span",{className:"sr-only",children:d})})}}}]);