(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4385],{1668:function(e,s,t){Promise.resolve().then(t.bind(t,5806))},5806:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return Z}});var r=t(7437),a=t(2265);t(8330),t(9665),t(3616),t(4964);var l=t(3145),n=t(2754),i=t(2489),o=t(7689),c=t(9322),d=t(1671);function m(e){let{type:s,onUploadComplete:t,currentUrl:l,label:m,accept:u}=e,[x,p]=(0,a.useState)(!1),[h,g]=(0,a.useState)(null),[b,j]=(0,a.useState)(!1),[f,y]=(0,a.useState)(l||null),v=(0,a.useRef)(null),N="model"===s?".glb,.gltf":".jpg,.jpeg,.png,.webp,.avif",w=async e=>{var r,a;let n=null===(r=e.target.files)||void 0===r?void 0:r[0];if(n){p(!0),g(null),j(!1);try{if("image"===s){let e=new FileReader;e.onloadend=()=>{y(e.result)},e.readAsDataURL(n)}let e=new FormData;e.append("file",n),e.append("type",s);let r=await fetch("/api/admin/upload",{method:"POST",body:e});if(!r.ok){let e=await r.json();throw Error((null===(a=e.error)||void 0===a?void 0:a.message)||"Upload failed")}let l=await r.json();j(!0),t(l.data.url),setTimeout(()=>j(!1),3e3)}catch(e){console.error("Upload error:",e),g(e instanceof Error?e.message:"Upload failed"),y(l||null)}finally{p(!1)}}},C=()=>{y(null),g(null),j(!1),v.current&&(v.current.value="")};return(0,r.jsxs)("div",{className:"space-y-3",children:[m&&(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700",children:m}),(0,r.jsxs)("div",{className:"border-2 border-dashed border-neutral-300 rounded-lg p-6 text-center hover:border-primary-500 transition-colors",children:[f&&"image"===s&&(0,r.jsxs)("div",{className:"mb-4 relative inline-block",children:[(0,r.jsx)("img",{src:f,alt:"Preview",className:"max-h-40 rounded-lg"}),(0,r.jsx)("button",{onClick:C,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:(0,r.jsx)(i.Z,{className:"w-4 h-4"})})]}),f&&"model"===s&&(0,r.jsxs)("div",{className:"mb-4 p-4 bg-neutral-100 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm text-neutral-700 font-medium",children:"Model uploaded"}),(0,r.jsx)("p",{className:"text-xs text-neutral-500 mt-1 break-all",children:f}),(0,r.jsx)("button",{onClick:C,className:"mt-2 text-sm text-red-600 hover:text-red-700",children:"Clear"})]}),(0,r.jsx)("input",{ref:v,type:"file",accept:u||N,onChange:w,className:"hidden"}),(0,r.jsx)(n.zx,{type:"button",variant:"secondary",onClick:()=>{var e;null===(e=v.current)||void 0===e||e.click()},disabled:x,className:"mx-auto",children:x?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.$j,{size:"sm",className:"mr-2"}),"Uploading..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),f?"Change File":"Upload File"]})}),(0,r.jsx)("p",{className:"text-xs text-neutral-500 mt-2",children:"model"===s?"GLB or GLTF files (max 50MB)":"JPG, PNG, WebP, or AVIF (max 10MB)"}),h&&(0,r.jsxs)("div",{className:"mt-4 flex items-center justify-center gap-2 text-red-600",children:[(0,r.jsx)(c.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"text-sm",children:h})]}),b&&(0,r.jsxs)("div",{className:"mt-4 flex items-center justify-center gap-2 text-green-600",children:[(0,r.jsx)(d.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"text-sm",children:"Upload successful!"})]})]})]})}var u=t(9397),x=t(8893),p=t(8930);let h=["deck","slide","swing","ladder","stairs","roof","structural"];function g(e){let{connectionPoints:s,compatibilityRules:t,onChange:l}=e,[i,o]=(0,a.useState)(s||[]),[c,d]=(0,a.useState)(null),[m,g]=(0,a.useState)({}),b=e=>{d(e),g(i[e])},j=()=>{if(null===c)return;let e=[...i];e[c]=m,o(e),l(e,t),d(null),g({})},f=()=>{d(null),g({})},y=e=>{let s=i.filter((s,t)=>t!==e);o(s),l(s,t)},v=(e,s)=>{g(t=>({...t,[e]:s}))},N=(e,s)=>{g(t=>({...t,position:{...t.position||{x:0,y:0,z:0},[e]:parseFloat(s)||0}}))},w=(e,s)=>{g(t=>({...t,orientation:{...t.orientation||{x:0,y:0,z:0},[e]:parseFloat(s)||0}}))},C=e=>{let s=e.split(",").map(e=>e.trim()).filter(Boolean);g(e=>({...e,allowedConnections:s}))};return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"font-semibold text-neutral-900",children:"Connection Points"}),(0,r.jsxs)(n.zx,{type:"button",variant:"secondary",size:"sm",onClick:()=>{let e={id:"cp-".concat(Date.now()),type:"deck",position:{x:0,y:0,z:0},orientation:{x:0,y:0,z:0},allowedConnections:[]},s=[...i,e];o(s),l(s,t),d(s.length-1),g(e)},className:"flex items-center gap-2",children:[(0,r.jsx)(u.Z,{className:"w-4 h-4"}),"Add Point"]})]}),0===i.length?(0,r.jsxs)("div",{className:"text-center py-8 bg-neutral-50 rounded-lg border border-neutral-200",children:[(0,r.jsx)("p",{className:"text-neutral-600",children:"No connection points defined"}),(0,r.jsx)("p",{className:"text-sm text-neutral-500 mt-1",children:'Click "Add Point" to create a connection point'})]}):(0,r.jsx)("div",{className:"space-y-3",children:i.map((e,s)=>{var t,a,l,i,o,d,u;return(0,r.jsx)("div",{className:"border border-neutral-200 rounded-lg p-4",children:c===s?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Type"}),(0,r.jsx)("select",{value:m.type||"",onChange:e=>v("type",e.target.value),className:"w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:h.map(e=>(0,r.jsx)("option",{value:e,children:e},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Position (x, y, z)"}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,r.jsx)("input",{type:"number",step:"0.1",value:(null===(t=m.position)||void 0===t?void 0:t.x)||0,onChange:e=>N("x",e.target.value),placeholder:"X",className:"px-3 py-2 border border-neutral-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),(0,r.jsx)("input",{type:"number",step:"0.1",value:(null===(a=m.position)||void 0===a?void 0:a.y)||0,onChange:e=>N("y",e.target.value),placeholder:"Y",className:"px-3 py-2 border border-neutral-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),(0,r.jsx)("input",{type:"number",step:"0.1",value:(null===(l=m.position)||void 0===l?void 0:l.z)||0,onChange:e=>N("z",e.target.value),placeholder:"Z",className:"px-3 py-2 border border-neutral-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Orientation (x, y, z)"}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,r.jsx)("input",{type:"number",step:"0.1",value:(null===(i=m.orientation)||void 0===i?void 0:i.x)||0,onChange:e=>w("x",e.target.value),placeholder:"X",className:"px-3 py-2 border border-neutral-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),(0,r.jsx)("input",{type:"number",step:"0.1",value:(null===(o=m.orientation)||void 0===o?void 0:o.y)||0,onChange:e=>w("y",e.target.value),placeholder:"Y",className:"px-3 py-2 border border-neutral-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),(0,r.jsx)("input",{type:"number",step:"0.1",value:(null===(d=m.orientation)||void 0===d?void 0:d.z)||0,onChange:e=>w("z",e.target.value),placeholder:"Z",className:"px-3 py-2 border border-neutral-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Allowed Connections (comma-separated)"}),(0,r.jsx)("input",{type:"text",value:(null===(u=m.allowedConnections)||void 0===u?void 0:u.join(", "))||"",onChange:e=>C(e.target.value),placeholder:"e.g., deck, slide, ladder",className:"w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(n.zx,{type:"button",variant:"primary",size:"sm",onClick:j,className:"flex-1",children:"Save"}),(0,r.jsx)(n.zx,{type:"button",variant:"ghost",size:"sm",onClick:f,className:"flex-1",children:"Cancel"})]})]}):(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"font-medium text-neutral-900",children:e.type}),(0,r.jsxs)("span",{className:"text-xs text-neutral-500",children:["#",e.id]})]}),(0,r.jsxs)("p",{className:"text-sm text-neutral-600",children:["Position: (",e.position.x,", ",e.position.y,","," ",e.position.z,")"]}),(0,r.jsxs)("p",{className:"text-sm text-neutral-600",children:["Orientation: (",e.orientation.x,", ",e.orientation.y,", ",e.orientation.z,")"]}),e.allowedConnections.length>0&&(0,r.jsxs)("p",{className:"text-sm text-neutral-600",children:["Allowed: ",e.allowedConnections.join(", ")]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{type:"button",onClick:()=>b(s),className:"text-neutral-600 hover:text-primary-600",children:(0,r.jsx)(x.Z,{className:"w-4 h-4"})}),(0,r.jsx)("button",{type:"button",onClick:()=>y(s),className:"text-neutral-600 hover:text-red-600",children:(0,r.jsx)(p.Z,{className:"w-4 h-4"})})]})]})},e.id)})}),(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,r.jsxs)("p",{className:"text-sm text-blue-900",children:[(0,r.jsx)("strong",{children:"Note:"})," Connection points define where other components can attach to this component. Position and orientation are in 3D space relative to the component's origin."]})})]})}let b=["Playdecks","Access","Slides","Swings","Roofs","Accessories","Connectors"];function j(e){let{mode:s,componentId:t,onClose:l,onSuccess:o}=e,[d,u]=(0,a.useState)(!1),[x,p]=(0,a.useState)(null),[h,j]=(0,a.useState)([]),[f,y]=(0,a.useState)({name:"",category:"",subcategory:"",tierId:"",price:"",thumbnail:"",model3D:"",weight:"",published:!1,width:"",depth:"",height:"",unit:"ft",ageRange:"",capacity:"",materials:"",colors:""}),[v,N]=(0,a.useState)([]),[w,C]=(0,a.useState)([]);(0,a.useEffect)(()=>{k(),"edit"===s&&t&&S()},[s,t]);let k=async()=>{try{let e=await fetch("/api/tiers");if(e.ok){let s=await e.json();j(s.data||[])}}catch(e){console.error("Error fetching tiers:",e)}},S=async()=>{if(t)try{var e,s,r,a,l,n;u(!0);let i=await fetch("/api/admin/components/".concat(t));if(!i.ok)throw Error("Failed to fetch component");let{data:o}=await i.json(),c=o.dimensions,d=o.metadata;y({name:o.name,category:o.category,subcategory:o.subcategory||"",tierId:o.tierId,price:o.price.toString(),thumbnail:o.thumbnail,model3D:o.model3D,weight:o.weight.toString(),published:o.published,width:(null===(e=c.width)||void 0===e?void 0:e.toString())||"",depth:(null===(s=c.depth)||void 0===s?void 0:s.toString())||"",height:(null===(r=c.height)||void 0===r?void 0:r.toString())||"",unit:c.unit||"ft",ageRange:d.ageRange||"",capacity:(null===(a=d.capacity)||void 0===a?void 0:a.toString())||"",materials:(null===(l=d.materials)||void 0===l?void 0:l.join(", "))||"",colors:(null===(n=d.colors)||void 0===n?void 0:n.join(", "))||""}),N(Array.isArray(o.connectionPoints)?o.connectionPoints:[]),C(Array.isArray(o.compatibilityRules)?o.compatibilityRules:[])}catch(e){console.error("Error fetching component:",e),p("Failed to load component data")}finally{u(!1)}},F=async e=>{e.preventDefault(),u(!0),p(null);try{let e={name:f.name,category:f.category,subcategory:f.subcategory||null,tierId:f.tierId,price:parseFloat(f.price),thumbnail:f.thumbnail,model3D:f.model3D,weight:parseFloat(f.weight),published:f.published,dimensions:{width:parseFloat(f.width),depth:parseFloat(f.depth),height:parseFloat(f.height),unit:f.unit},metadata:{ageRange:f.ageRange,capacity:f.capacity?parseInt(f.capacity):0,materials:f.materials.split(",").map(e=>e.trim()).filter(Boolean),colors:f.colors.split(",").map(e=>e.trim()).filter(Boolean)},connectionPoints:v,compatibilityRules:w},a="create"===s?"/api/admin/components":"/api/admin/components/".concat(t),l=await fetch(a,{method:"create"===s?"POST":"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!l.ok){var r;let e=await l.json();throw Error((null===(r=e.error)||void 0===r?void 0:r.message)||"Failed to save component")}o()}catch(e){console.error("Error saving component:",e),p(e instanceof Error?e.message:"Failed to save component")}finally{u(!1)}},z=e=>{let{name:s,value:t,type:r}=e.target,a=e.target.checked;y(e=>({...e,[s]:"checkbox"===r?a:t}))};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"sticky top-0 bg-white border-b border-neutral-200 px-6 py-4 flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-neutral-900",children:"create"===s?"Create Component":"Edit Component"}),(0,r.jsx)("button",{onClick:l,className:"text-neutral-400 hover:text-neutral-600",children:(0,r.jsx)(i.Z,{className:"w-6 h-6"})})]}),(0,r.jsxs)("form",{onSubmit:F,className:"p-6 space-y-6",children:[x&&(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[(0,r.jsx)(c.Z,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-red-900",children:"Error"}),(0,r.jsx)("p",{className:"text-sm text-red-700 mt-1",children:x})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-neutral-900",children:"Basic Information"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Name *"}),(0,r.jsx)("input",{type:"text",name:"name",value:f.name,onChange:z,required:!0,className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Category *"}),(0,r.jsxs)("select",{name:"category",value:f.category,onChange:z,required:!0,className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,r.jsx)("option",{value:"",children:"Select category"}),b.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Subcategory"}),(0,r.jsx)("input",{type:"text",name:"subcategory",value:f.subcategory,onChange:z,className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Tier *"}),(0,r.jsxs)("select",{name:"tierId",value:f.tierId,onChange:z,required:!0,className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,r.jsx)("option",{value:"",children:"Select tier"}),h.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Price ($) *"}),(0,r.jsx)("input",{type:"number",name:"price",value:f.price,onChange:z,required:!0,step:"0.01",min:"0",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-neutral-900",children:"Media"}),(0,r.jsx)(m,{type:"image",label:"Thumbnail Image *",currentUrl:f.thumbnail,onUploadComplete:e=>y(s=>({...s,thumbnail:e}))}),f.thumbnail&&(0,r.jsx)("input",{type:"hidden",name:"thumbnail",value:f.thumbnail,required:!0}),(0,r.jsx)(m,{type:"model",label:"3D Model (GLB/GLTF) *",currentUrl:f.model3D,onUploadComplete:e=>y(s=>({...s,model3D:e}))}),f.model3D&&(0,r.jsx)("input",{type:"hidden",name:"model3D",value:f.model3D,required:!0})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-neutral-900",children:"Dimensions"}),(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Width *"}),(0,r.jsx)("input",{type:"number",name:"width",value:f.width,onChange:z,required:!0,step:"0.1",min:"0",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Depth *"}),(0,r.jsx)("input",{type:"number",name:"depth",value:f.depth,onChange:z,required:!0,step:"0.1",min:"0",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Height *"}),(0,r.jsx)("input",{type:"number",name:"height",value:f.height,onChange:z,required:!0,step:"0.1",min:"0",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Unit *"}),(0,r.jsxs)("select",{name:"unit",value:f.unit,onChange:z,required:!0,className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,r.jsx)("option",{value:"ft",children:"Feet"}),(0,r.jsx)("option",{value:"m",children:"Meters"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Weight (lbs) *"}),(0,r.jsx)("input",{type:"number",name:"weight",value:f.weight,onChange:z,required:!0,step:"0.1",min:"0",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-neutral-900",children:"Additional Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Age Range"}),(0,r.jsx)("input",{type:"text",name:"ageRange",value:f.ageRange,onChange:z,placeholder:"e.g., 3-12 years",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Capacity (children)"}),(0,r.jsx)("input",{type:"number",name:"capacity",value:f.capacity,onChange:z,min:"0",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Materials (comma-separated)"}),(0,r.jsx)("input",{type:"text",name:"materials",value:f.materials,onChange:z,placeholder:"e.g., Cedar Wood, Stainless Steel",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Available Colors (comma-separated)"}),(0,r.jsx)("input",{type:"text",name:"colors",value:f.colors,onChange:z,placeholder:"e.g., Natural, Green, Blue",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),(0,r.jsx)(g,{connectionPoints:v,compatibilityRules:w,onChange:(e,s)=>{N(e),C(s)}}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("input",{type:"checkbox",id:"published",name:"published",checked:f.published,onChange:z,className:"w-4 h-4 text-primary-600 border-neutral-300 rounded focus:ring-primary-500"}),(0,r.jsx)("label",{htmlFor:"published",className:"text-sm font-medium text-neutral-700",children:"Publish component (make visible in configurator)"})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4 border-t border-neutral-200",children:[(0,r.jsx)(n.zx,{type:"button",variant:"ghost",onClick:l,disabled:d,className:"flex-1",children:"Cancel"}),(0,r.jsx)(n.zx,{type:"submit",variant:"primary",disabled:d,className:"flex-1",children:d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.$j,{size:"sm",className:"mr-2"}),"Saving..."]}):"create"===s?"Create Component":"Save Changes"})]})]})]})})}var f=t(6865);function y(e){let{component:s,onClose:t,onSuccess:l}=e,[o,c]=(0,a.useState)(!1),[d,m]=(0,a.useState)(null),u=async()=>{c(!0),m(null);try{let t=await fetch("/api/admin/components/".concat(s.id),{method:"DELETE"});if(!t.ok){var e;let s=await t.json();throw Error((null===(e=s.error)||void 0===e?void 0:e.message)||"Failed to delete component")}l()}catch(e){console.error("Error deleting component:",e),m(e instanceof Error?e.message:"Failed to delete component")}finally{c(!1)}};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full",children:[(0,r.jsxs)("div",{className:"border-b border-neutral-200 px-6 py-4 flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-neutral-900",children:"Delete Component"}),(0,r.jsx)("button",{onClick:t,className:"text-neutral-400 hover:text-neutral-600",disabled:o,children:(0,r.jsx)(i.Z,{className:"w-6 h-6"})})]}),(0,r.jsxs)("div",{className:"p-6 space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:(0,r.jsx)(f.Z,{className:"w-5 h-5 text-red-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-neutral-900",children:["Are you sure you want to delete"," ",(0,r.jsx)("span",{className:"font-semibold",children:s.name}),"?"]}),(0,r.jsx)("p",{className:"text-sm text-neutral-600 mt-2",children:"This action cannot be undone. The component will be permanently removed from the system."})]})]}),d&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsx)("p",{className:"text-sm text-red-700",children:d})})]}),(0,r.jsxs)("div",{className:"border-t border-neutral-200 px-6 py-4 flex gap-3",children:[(0,r.jsx)(n.zx,{variant:"ghost",onClick:t,disabled:o,className:"flex-1",children:"Cancel"}),(0,r.jsx)(n.zx,{variant:"primary",onClick:u,disabled:o,className:"flex-1 bg-red-600 hover:bg-red-700",children:o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.$j,{size:"sm",className:"mr-2"}),"Deleting..."]}):"Delete Component"})]})]})})}var v=t(7769),N=t(2208);function w(e){let{component:s,onUpdated:t,onDeleted:i}=e,[o,c]=(0,a.useState)(!1),[d,m]=(0,a.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-neutral-200 overflow-hidden hover:shadow-lg transition-shadow",children:[(0,r.jsxs)("div",{className:"relative aspect-square bg-neutral-100",children:[(0,r.jsx)(l.default,{src:s.thumbnail,alt:s.name,fill:!0,className:"object-cover"}),!s.published&&(0,r.jsxs)("div",{className:"absolute top-2 right-2 bg-yellow-500 text-white px-2 py-1 rounded text-xs font-medium flex items-center gap-1",children:[(0,r.jsx)(v.Z,{className:"w-3 h-3"}),"Draft"]}),s.published&&(0,r.jsxs)("div",{className:"absolute top-2 right-2 bg-green-500 text-white px-2 py-1 rounded text-xs font-medium flex items-center gap-1",children:[(0,r.jsx)(N.Z,{className:"w-3 h-3"}),"Published"]})]}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-neutral-900 mb-1",children:s.name}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-neutral-600 mb-2",children:[(0,r.jsx)("span",{className:"bg-neutral-100 px-2 py-0.5 rounded",children:s.category}),s.subcategory&&(0,r.jsx)("span",{className:"bg-neutral-100 px-2 py-0.5 rounded",children:s.subcategory})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("span",{className:"text-sm text-neutral-600",children:s.tier.name}),(0,r.jsxs)("span",{className:"font-semibold text-primary-600",children:["$",s.price.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(n.zx,{variant:"secondary",size:"sm",onClick:()=>c(!0),className:"flex-1 flex items-center justify-center gap-2",children:[(0,r.jsx)(x.Z,{className:"w-4 h-4"}),"Edit"]}),(0,r.jsx)(n.zx,{variant:"ghost",size:"sm",onClick:()=>m(!0),className:"text-red-600 hover:bg-red-50",children:(0,r.jsx)(p.Z,{className:"w-4 h-4"})})]})]})]}),o&&(0,r.jsx)(j,{mode:"edit",componentId:s.id,onClose:()=>c(!1),onSuccess:()=>{c(!1),null==t||t()}}),d&&(0,r.jsx)(y,{component:s,onClose:()=>m(!1),onSuccess:()=>{m(!1),null==i||i()}})]})}var C=t(3247);let k=["Playdecks","Access","Slides","Swings","Roofs","Accessories","Connectors"];function S(e){let{filters:s,onFiltersChange:t}=e,[l,n]=(0,a.useState)([]),[i,o]=(0,a.useState)(s.search);(0,a.useEffect)(()=>{c()},[]),(0,a.useEffect)(()=>{let e=setTimeout(()=>{t({...s,search:i})},300);return()=>clearTimeout(e)},[i]);let c=async()=>{try{let e=await fetch("/api/tiers");if(e.ok){let s=await e.json();n(s.data||[])}}catch(e){console.error("Error fetching tiers:",e)}},d=(e,r)=>{t({...s,[e]:r})};return(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-neutral-200 p-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,r.jsxs)("div",{className:"lg:col-span-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Search"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(C.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400"}),(0,r.jsx)("input",{type:"text",value:i,onChange:e=>o(e.target.value),placeholder:"Search by name, category...",className:"w-full pl-10 pr-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Category"}),(0,r.jsxs)("select",{value:s.category,onChange:e=>d("category",e.target.value),className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,r.jsx)("option",{value:"all",children:"All Categories"}),k.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Tier"}),(0,r.jsxs)("select",{value:s.tier,onChange:e=>d("tier",e.target.value),className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,r.jsx)("option",{value:"all",children:"All Tiers"}),l.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Status"}),(0,r.jsxs)("select",{value:s.published,onChange:e=>d("published",e.target.value),className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,r.jsx)("option",{value:"all",children:"All Status"}),(0,r.jsx)("option",{value:"true",children:"Published"}),(0,r.jsx)("option",{value:"false",children:"Draft"})]})]})]}),(0,r.jsxs)("div",{className:"mt-4 flex items-center gap-4",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-neutral-700",children:"Sort by:"}),(0,r.jsxs)("select",{value:s.sortBy,onChange:e=>d("sortBy",e.target.value),className:"px-3 py-1.5 border border-neutral-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,r.jsx)("option",{value:"createdAt",children:"Date Created"}),(0,r.jsx)("option",{value:"name",children:"Name"}),(0,r.jsx)("option",{value:"category",children:"Category"}),(0,r.jsx)("option",{value:"price",children:"Price"})]}),(0,r.jsxs)("select",{value:s.sortOrder,onChange:e=>d("sortOrder",e.target.value),className:"px-3 py-1.5 border border-neutral-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,r.jsx)("option",{value:"asc",children:"Ascending"}),(0,r.jsx)("option",{value:"desc",children:"Descending"})]})]})]})}function F(e){let{refreshTrigger:s=0,onComponentUpdated:t,onComponentDeleted:l}=e,[i,o]=(0,a.useState)([]),[d,m]=(0,a.useState)(!0),[u,x]=(0,a.useState)(null),[p,h]=(0,a.useState)({category:"all",tier:"all",published:"all",search:"",sortBy:"createdAt",sortOrder:"desc"});(0,a.useEffect)(()=>{g()},[s,p]);let g=async()=>{try{m(!0),x(null);let e=new URLSearchParams;"all"!==p.category&&e.append("category",p.category),"all"!==p.tier&&e.append("tier",p.tier),"all"!==p.published&&e.append("published",p.published),p.search&&e.append("search",p.search),e.append("sortBy",p.sortBy),e.append("sortOrder",p.sortOrder);let s=await fetch("/api/admin/components?".concat(e.toString()));if(!s.ok)throw Error("Failed to fetch components");let t=await s.json();o(t.data||[])}catch(e){console.error("Error fetching components:",e),x(e instanceof Error?e.message:"Failed to load components")}finally{m(!1)}};return d?(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsx)(n.$j,{size:"lg"})}):u?(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(c.Z,{className:"w-5 h-5 text-red-600"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-red-900",children:"Error Loading Components"}),(0,r.jsx)("p",{className:"text-sm text-red-700 mt-1",children:u})]})]})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(S,{filters:p,onFiltersChange:h}),(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("p",{className:"text-sm text-neutral-600",children:[i.length," component",1!==i.length?"s":""," ","found"]})}),0===i.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("p",{className:"text-neutral-600",children:"No components found"}),(0,r.jsx)("p",{className:"text-sm text-neutral-500 mt-2",children:"Try adjusting your filters or create a new component"})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(e=>(0,r.jsx)(w,{component:e,onUpdated:t,onDeleted:l},e.id))})]})}var z=t(5252);let E=["Playdecks","Access","Slides","Swings","Roofs","Accessories","Connectors"];function T(e){let{onClose:s,onSuccess:t}=e,[l,o]=(0,a.useState)(!1),[d,m]=(0,a.useState)(null),[u,x]=(0,a.useState)([]),[p,h]=(0,a.useState)({adjustmentType:"percentage",adjustmentValue:"",category:"",tierId:""});(0,a.useEffect)(()=>{g()},[]);let g=async()=>{try{let e=await fetch("/api/tiers");if(e.ok){let s=await e.json();x(s.data||[])}}catch(e){console.error("Error fetching tiers:",e)}},b=async e=>{e.preventDefault(),o(!0),m(null);try{let e={adjustmentType:p.adjustmentType,adjustmentValue:parseFloat(p.adjustmentValue),category:p.category||void 0,tierId:p.tierId||void 0},r=await fetch("/api/admin/components/bulk-pricing",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){var s;let e=await r.json();throw Error((null===(s=e.error)||void 0===s?void 0:s.message)||"Failed to update pricing")}let a=await r.json();alert(a.message),t()}catch(e){console.error("Error updating pricing:",e),m(e instanceof Error?e.message:"Failed to update pricing")}finally{o(!1)}},j=e=>{let{name:s,value:t}=e.target;h(e=>({...e,[s]:t}))};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"sticky top-0 bg-white border-b border-neutral-200 px-6 py-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center",children:(0,r.jsx)(z.Z,{className:"w-5 h-5 text-primary-600"})}),(0,r.jsx)("h2",{className:"text-xl font-bold text-neutral-900",children:"Bulk Pricing Update"})]}),(0,r.jsx)("button",{onClick:s,className:"text-neutral-400 hover:text-neutral-600",children:(0,r.jsx)(i.Z,{className:"w-6 h-6"})})]}),(0,r.jsxs)("form",{onSubmit:b,className:"p-6 space-y-6",children:[d&&(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[(0,r.jsx)(c.Z,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-red-900",children:"Error"}),(0,r.jsx)("p",{className:"text-sm text-red-700 mt-1",children:d})]})]}),(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,r.jsxs)("p",{className:"text-sm text-blue-900",children:[(0,r.jsx)("strong",{children:"Note:"})," This will update prices for all components matching the selected filters. Use with caution."]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Adjustment Type *"}),(0,r.jsxs)("select",{name:"adjustmentType",value:p.adjustmentType,onChange:j,required:!0,className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,r.jsx)("option",{value:"percentage",children:"Percentage Change"}),(0,r.jsx)("option",{value:"fixed",children:"Fixed Amount Change"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:["percentage"===p.adjustmentType?"Percentage (%)":"Amount ($)"," ","*"]}),(0,r.jsx)("input",{type:"number",name:"adjustmentValue",value:p.adjustmentValue,onChange:j,required:!0,step:"0.01",placeholder:"percentage"===p.adjustmentType?"e.g., 10 for +10%, -5 for -5%":"e.g., 50 for +$50, -10 for -$10",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),(0,r.jsx)("p",{className:"text-xs text-neutral-500 mt-1",children:"percentage"===p.adjustmentType?"Enter positive number to increase, negative to decrease":"Enter positive amount to add, negative to subtract"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-neutral-900",children:"Filter Components (Optional)"}),(0,r.jsx)("p",{className:"text-sm text-neutral-600",children:"Leave filters empty to update all components"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Category"}),(0,r.jsxs)("select",{name:"category",value:p.category,onChange:j,className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,r.jsx)("option",{value:"",children:"All Categories"}),E.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Tier"}),(0,r.jsxs)("select",{name:"tierId",value:p.tierId,onChange:j,className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,r.jsx)("option",{value:"",children:"All Tiers"}),u.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]})]}),p.adjustmentValue&&(0,r.jsxs)("div",{className:"bg-neutral-50 border border-neutral-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-neutral-900 mb-2",children:"Preview"}),(0,r.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,r.jsxs)("p",{className:"text-neutral-700",children:["Example: $100.00 →"," ",(0,r.jsxs)("span",{className:"font-semibold text-primary-600",children:["$","percentage"===p.adjustmentType?(100*(1+parseFloat(p.adjustmentValue||"0")/100)).toFixed(2):(100+parseFloat(p.adjustmentValue||"0")).toFixed(2)]})]}),(0,r.jsxs)("p",{className:"text-neutral-700",children:["Example: $250.00 →"," ",(0,r.jsxs)("span",{className:"font-semibold text-primary-600",children:["$","percentage"===p.adjustmentType?(250*(1+parseFloat(p.adjustmentValue||"0")/100)).toFixed(2):(250+parseFloat(p.adjustmentValue||"0")).toFixed(2)]})]})]})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4 border-t border-neutral-200",children:[(0,r.jsx)(n.zx,{type:"button",variant:"ghost",onClick:s,disabled:l,className:"flex-1",children:"Cancel"}),(0,r.jsx)(n.zx,{type:"submit",variant:"primary",disabled:l,className:"flex-1",children:l?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.$j,{size:"sm",className:"mr-2"}),"Updating..."]}):"Update Prices"})]})]})]})})}var P=t(4630);function A(e){let{onClose:s,onSuccess:t}=e,[l,o]=(0,a.useState)(!0),[d,m]=(0,a.useState)(null),[u,p]=(0,a.useState)([]),[h,g]=(0,a.useState)(null),[b,j]=(0,a.useState)(null),[f,y]=(0,a.useState)("");(0,a.useEffect)(()=>{v()},[]);let v=async()=>{try{o(!0);let e=await fetch("/api/admin/categories");if(!e.ok)throw Error("Failed to fetch categories");let s=await e.json();p(s.data||[])}catch(e){console.error("Error fetching categories:",e),m(e instanceof Error?e.message:"Failed to load categories")}finally{o(!1)}},N=async e=>{if(f.trim())try{o(!0),m(null);let r=await fetch("/api/admin/categories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"rename-category",oldCategory:e,newCategory:f.trim()})});if(!r.ok){var s;let e=await r.json();throw Error((null===(s=e.error)||void 0===s?void 0:s.message)||"Failed to rename category")}g(null),y(""),await v(),t()}catch(e){console.error("Error renaming category:",e),m(e instanceof Error?e.message:"Failed to rename category")}finally{o(!1)}},w=async(e,s)=>{if(f.trim())try{o(!0),m(null);let a=await fetch("/api/admin/categories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"rename-subcategory",oldCategory:e,oldSubcategory:s,newSubcategory:f.trim()})});if(!a.ok){var r;let e=await a.json();throw Error((null===(r=e.error)||void 0===r?void 0:r.message)||"Failed to rename subcategory")}j(null),y(""),await v(),t()}catch(e){console.error("Error renaming subcategory:",e),m(e instanceof Error?e.message:"Failed to rename subcategory")}finally{o(!1)}},C=e=>{g(e),y(e),j(null)},k=(e,s)=>{j({category:e,subcategory:s}),y(s),g(null)},S=()=>{g(null),j(null),y("")};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"sticky top-0 bg-white border-b border-neutral-200 px-6 py-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center",children:(0,r.jsx)(P.Z,{className:"w-5 h-5 text-primary-600"})}),(0,r.jsx)("h2",{className:"text-xl font-bold text-neutral-900",children:"Category Management"})]}),(0,r.jsx)("button",{onClick:s,className:"text-neutral-400 hover:text-neutral-600",children:(0,r.jsx)(i.Z,{className:"w-6 h-6"})})]}),(0,r.jsxs)("div",{className:"p-6 space-y-6",children:[d&&(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[(0,r.jsx)(c.Z,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-red-900",children:"Error"}),(0,r.jsx)("p",{className:"text-sm text-red-700 mt-1",children:d})]})]}),l&&!u.length?(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsx)(n.$j,{size:"lg"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,r.jsxs)("p",{className:"text-sm text-blue-900",children:[(0,r.jsx)("strong",{children:"Note:"})," Renaming categories will update all components in that category. This action cannot be undone."]})}),(0,r.jsx)("div",{className:"space-y-4",children:u.map(e=>(0,r.jsxs)("div",{className:"border border-neutral-200 rounded-lg p-4",children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-3",children:h===e.name?(0,r.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,r.jsx)("input",{type:"text",value:f,onChange:e=>y(e.target.value),className:"flex-1 px-3 py-2 border border-neutral-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500",autoFocus:!0}),(0,r.jsx)(n.zx,{variant:"primary",size:"sm",onClick:()=>N(e.name),disabled:l,children:"Save"}),(0,r.jsx)(n.zx,{variant:"ghost",size:"sm",onClick:S,disabled:l,children:"Cancel"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-neutral-900",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-neutral-600",children:[e.count," component",1!==e.count?"s":""]})]}),(0,r.jsx)("button",{onClick:()=>C(e.name),className:"text-neutral-600 hover:text-primary-600",children:(0,r.jsx)(x.Z,{className:"w-4 h-4"})})]})}),e.subcategories.length>0&&(0,r.jsx)("div",{className:"ml-4 space-y-2 border-l-2 border-neutral-200 pl-4",children:e.subcategories.map(s=>(0,r.jsx)("div",{className:"flex items-center justify-between",children:(null==b?void 0:b.category)===e.name&&(null==b?void 0:b.subcategory)===s.name?(0,r.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,r.jsx)("input",{type:"text",value:f,onChange:e=>y(e.target.value),className:"flex-1 px-3 py-1.5 border border-neutral-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500",autoFocus:!0}),(0,r.jsx)(n.zx,{variant:"primary",size:"sm",onClick:()=>w(e.name,s.name),disabled:l,children:"Save"}),(0,r.jsx)(n.zx,{variant:"ghost",size:"sm",onClick:S,disabled:l,children:"Cancel"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-neutral-700",children:s.name}),(0,r.jsxs)("p",{className:"text-xs text-neutral-500",children:[s.count," component",1!==s.count?"s":""]})]}),(0,r.jsx)("button",{onClick:()=>k(e.name,s.name),className:"text-neutral-600 hover:text-primary-600",children:(0,r.jsx)(x.Z,{className:"w-3 h-3"})})]})},s.name))})]},e.name))})]})]}),(0,r.jsx)("div",{className:"border-t border-neutral-200 px-6 py-4",children:(0,r.jsx)(n.zx,{variant:"ghost",onClick:s,className:"w-full",children:"Close"})})]})})}function Z(){let[e,s]=(0,a.useState)(!1),[t,l]=(0,a.useState)(!1),[i,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(0);return(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-neutral-900",children:"Component Management"}),(0,r.jsx)("p",{className:"mt-2 text-neutral-600",children:"Manage modular components for the product configurator"})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsxs)(n.zx,{variant:"secondary",onClick:()=>o(!0),className:"flex items-center gap-2",children:[(0,r.jsx)(P.Z,{className:"w-5 h-5"}),"Categories"]}),(0,r.jsxs)(n.zx,{variant:"secondary",onClick:()=>l(!0),className:"flex items-center gap-2",children:[(0,r.jsx)(z.Z,{className:"w-5 h-5"}),"Bulk Pricing"]}),(0,r.jsxs)(n.zx,{variant:"primary",onClick:()=>s(!0),className:"flex items-center gap-2",children:[(0,r.jsx)(u.Z,{className:"w-5 h-5"}),"Add Component"]})]})]}),(0,r.jsx)(F,{refreshTrigger:c,onComponentUpdated:()=>{d(e=>e+1)},onComponentDeleted:()=>{d(e=>e+1)}}),e&&(0,r.jsx)(j,{mode:"create",onClose:()=>s(!1),onSuccess:()=>{s(!1),d(e=>e+1)}}),t&&(0,r.jsx)(T,{onClose:()=>l(!1),onSuccess:()=>{l(!1),d(e=>e+1)}}),i&&(0,r.jsx)(A,{onClose:()=>o(!1),onSuccess:()=>{o(!1),d(e=>e+1)}})]})}}},function(e){e.O(0,[2972,6137,5878,7018,1681,9358,8330,2754,2971,2117,1744],function(){return e(e.s=1668)}),_N_E=e.O()}]);